#### sanic_zmq_schedule调度系统的功能点

##### 本框架与satl功能对比
| 功能| 飞天调度     |    salt | 
| :-------- | --------:| :--: |
| api       | 自带, 基于sanic | 基于salt_cli再扩展  |
| 远程执行脚本|   支持，灵活的格式| 支持，但安装官方定义规范 |
| 文件分发   | 支持, 灵活格式     | 支持, 不支持指定文件发送服务器| 

##### redis作用
    0库用于任务队列
    1库用于存任务执行结果, 客户端返回dict, {"jid": xx, "retcode": 0 ,"stdout": "x"}
    2库用于存心跳结果

##### 心跳
>   1.每隔5秒同步
     2.  数据同步，存于redis, 有效期有10秒，防止客户端down，客户端id自动从redis的2库失效
     3. 客户端id命名方式: ip
 
##### 文件同步(分发)
>    1.指定单文件名，单远程客户端同步(已完成)
     2. 所有文件名 ＊，所有的远程客户端同步 *(由第一步基础上扩展)
     3. 所有文件名 ＊， 单远程客户端同步(由第一步基础上扩展)

##### 执行远程命令
>1.动态加载脚本，执行涵数名，涵数名func是固定的
 2.脚本返回dict，固定格式{"retcoe": xx, "stdout": xx , "stderr": xx}
 3.传参两种形式 *args, **kwargs , 如("x", "y") {"x": "y"}

##### 服务端启动
1. app_api
2. app_heartbeat
3. app_msg_broker
4. app_msg_server
5. app_publisher

##### 客户端
1. 配置连接服务端的ip, 端口, agent_id
2. 启动app



